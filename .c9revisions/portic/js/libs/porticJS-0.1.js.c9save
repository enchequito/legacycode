{"ts":1356007401629,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"(function(){\r\n\r\n    /**\r\n\t *@class PorticCtx\r\n\t */\r\n\t// Si existeix, recuperem el context global de portic (1 context per navegador).\r\n\tif('undefined' === typeof window.top.PorticCtx){\r\n\t\tPorticCtx = {};\r\n\t}else{\r\n\t\tPorticCtx = window.top.PorticCtx;\r\n\t}\r\n\t\r\n\tif ('undefined' !== typeof window) {\r\n\t    window.pCtx = window.PorticCtx = pCtx = PorticCtx;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Declaració de les constants de configuració.\r\n\t */\r\n\tvar CONFIG = (function(){\r\n\t\tvar values = {\r\n\t\t   // Resolució de fitxers de literals.\r\n\t\t   'LANGUAGE_BASEPATH': '/enchequito/legacycode/workspace/prroutes/js/resources/',\r\n\t\t   'LANGUAGE_FILE': 'language_%LANG%.properties',\r\n\t\t   'LANGUAGE_DEFAULT': 'language_en.properties',\r\n\t\t   'LANGUAGE_TOKEN': '%LANG%'\r\n\t\t};\r\n\t    \r\n\t\treturn{\r\n\t\t\tget: function(key) {return values[key];}\r\n\t\t};\r\n\t})();\r\n\t\r\n\t\r\n\tPorticCtx.loadBrowserLanguage = function(){\r\n\t\tPorticCtx.loadLanguage(navigator.language);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Càrrega dels literals a partir del idioma indicat per parámetre.\r\n\t * @method loadLiterals\r\n\t */\r\n\tPorticCtx.loadLanguage = function(psLang){\r\n\t\tvar loResourceToLoad = CONFIG.get('LANGUAGE_BASEPATH');\r\n\t\t\r\n\t\tif('undefined' === typeof psLang){\r\n\t\t\tloResourceToLoad += CONFIG.get('LANGUAGE_DEFAULT');\r\n\t\t}else{\r\n\t\t\tloResourceToLoad += CONFIG.get('LANGUAGE_FILE').replaceAll(CONFIG.get('LANGUAGE_TOKEN'), psLang);\r\n\t\t}\r\n\t\t\r\n\t\t$.ajax({\r\n\t\t    url: loResourceToLoad,\r\n\t\t    async: false,\r\n\t\t    dataType: \"text\",\r\n\t\t    success: function(data, textStatus, jqXHR){Ember.I18n.translations = $.parseJSON(data);},\r\n\t\t    error: ajaxErrorHandler\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Recorre tots els elements del formulari indicat, buscant quins corresponen a camps d'entrada i \r\n\t * genera la corresponent cadena JSON. Té en compte possibles arrays d'elements amb el mateix nom.\r\n\t * @param formId valor del camp 'id' del formulari.\r\n\t * @returns cadena JSON.\r\n\t */\r\n\tPorticCtx.formToJSON = function(formId){\r\n\t    var loResult = {};\r\n\t    var loInputs = $(\"#\"+formId).serializeArray();\r\n\t    \r\n\t    $.each(loInputs, function(){\r\n\t    \t\r\n\t        if (loResult[this.name] === undefined) {\r\n\t        \tloResult[this.name] = (this.value || '');\r\n\t        }else{\r\n\t            if (!loResult[this.name].push) {\r\n\t            \tloResult[this.name] = [loResult[this.name]];\r\n\t            }\r\n\t            loResult[this.name].push(this.value || '');\t        \t\r\n\t        }\r\n\t    });\r\n\t    \r\n\t    return JSON.stringify(loResult);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Envía una petició al servidor on les dades s'intercanviaran en format JSON tant de pujada com de baixada.\r\n\t * @param jsonObjectName\r\n\t * @param jsonObjectData\r\n\t * @param url URL on realitzar la petició.\r\n\t * @param callback funció a invocar en cas que la petició finalitzi correctament.\r\n\t * @param errorCallBack funció a invocar en cas que la petició no finalitzi correctament.\r\n\t */\r\n\tPorticCtx.sendJSONPost = function(jsonType, jsonData, url, callback, errorCallBack){\r\n\t\ttry{\r\n\t\t\tvar loErrorCallback = ajaxErrorHandler;\r\n\t\t\t\r\n\t\t\tif('undefined' !== typeof errorCallBack){\r\n\t\t\t\tloErrorCallback = errorCallBack;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t    url: url,\r\n\t\t\t    dataType: \"json\",\r\n\t\t\t    async: false,\r\n\t\t\t    data:  {jsonType : jsonType, jsonData : jsonData},\r\n\t\t\t    success: callback,\r\n\t\t\t    error: loErrorCallback\r\n\t\t\t});\r\n\t\t}catch(e){\r\n\t\t\talert(e.message);\r\n\t\t}\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t * Envía una petició AJAX al servidor.\r\n\t * @param data dades a enviar.\r\n\t * @param url URL on realitzar la petició.\r\n\t * @param callback funció a invocar en cas que la petició finalitzi correctament.\r\n\t * @param errorCallBack funció a invocar en cas que la petició no finalitzi correctament.\r\n\t */\r\n\tPorticCtx.sendAjaxPost = function(data, url, callback, errorCallBack){\r\n\t\ttry{\r\n\t\t\tvar loErrorCallback = ajaxErrorHandler;\r\n\t\t\t\r\n\t\t\tif('undefined' !== typeof errorCallBack){\r\n\t\t\t\tloErrorCallback = errorCallBack;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t    url: url,\r\n\t\t\t    async: false,\r\n\t\t\t    data:  data,\r\n\t\t\t    success: callback,\r\n\t\t\t    error: loErrorCallback\r\n\t\t\t});\r\n\t\t}catch(e){\r\n\t\t\talert(e.message);\r\n\t\t}\r\n\t};\r\n\t\r\n\tajaxErrorHandler = function(data, textStatus, jqXHR){\r\n        alert('Error, error, eee-rror !!!!');\r\n    };\r\n})();\r\n\r\n\r\n\r\n/**\r\n * Afegim al prototip String la funció 'replaceAll'.\r\n **/\r\nString.prototype.replaceAll = function(str1, str2){return this.split(str1).join(str2);};\r\n\r\n/**\r\n * Recupera l'adreça base per a crides http a l'aplicació.\r\n * Parteix de la suposió que les URLs tenen la forma 'http://servername:port/appName/[......]\r\n * @returns {String}\r\n */\r\ngetApplicationPath = function(){\r\n   var href = window.location.href.split('/');\r\n   return href[2];\r\n};"]],"start1":0,"start2":0,"length1":0,"length2":4666}]],"length":4666}
{"contributors":[],"silentsave":false,"ts":1356007610355,"patch":[[{"diffs":[[0,"ce/p"],[-1,"rroutes"],[1,"ortic"],[0,"/js/"]],"start1":569,"start2":569,"length1":15,"length2":13}]],"length":4664,"saved":false}
{"contributors":[],"silentsave":false,"ts":1356019087285,"patch":[[{"diffs":[[0,"x;\r\n\t}\r\n\t\r\n\t"],[-1,""],[1,"\r\n\t/**\r\n\t * 'Singleton' una única sessió per context.\r\n\t */\r\n    function Session(){\r\n    \tthis.tokenSessio = \"\";\r\n    \tthis.usuariSessio = \"\";\r\n    \tthis.paisSessio = \"\";\r\n    \tthis.nifSessio = \"\";\r\n    \tthis.idioma = \"\";\r\n    \tthis.ready = function(){return this.tokenSessio!=\"\";};\r\n     };\r\n     var session = new Session();\r\n\r\n     function GenericForm(){\r\n    \t this.pagina = \"-1\";\r\n    \t this.totalElements = \"\";\r\n    \t this.elementsPagina = \"\";\r\n    \t this.params = \"\";\r\n     };\r\n     GenericForm.prototype = new Session();\r\n    \t\r\n\t"],[0,"/**\r\n\t * Dec"]],"start1":350,"start2":350,"length1":24,"length2":564},{"diffs":[[0,");\r\n\t\r\n\t"],[-1,""],[1,"/**\r\n\t * Retorna l'objecte sessió carregat en el context.\r\n\t * @returns {Session}\r\n\t */\r\n\tPorticCtx.getSession = function(){return session;};\r\n\t\t\r\n\t/**\r\n\t * Càrrega els literals a partir del el fitxer per defecte.\r\n\t * @method loadLiterals\r\n\t */"],[0,"\r\n\tPorti"]],"start1":1353,"start2":1353,"length1":16,"length2":261},{"diffs":[[0,"parámetre.\r\n"],[1,"\t * Si no s'indica l'idioma, es carrega el fitxer per defecte.\r\n"],[0,"\t * @method "]],"start1":1773,"start2":1773,"length1":24,"length2":88},{"diffs":[[0,"\r\n\t\t"],[-1,"$.ajax({\r\n\t\t    url:"],[1,"this.sendAjaxPost(\"\", \r\n\t\t\t\t\t\t "],[0," loR"]],"start1":2202,"start2":2202,"length1":28,"length2":39},{"diffs":[[0,"oad,"],[1," "],[0,"\r\n\t\t"],[-1,"    async: false,\r\n\t\t    dataType: \"text\",\r\n\t\t    success:"],[1,"\t\t\t\t "],[0," fun"]],"start1":2251,"start2":2251,"length1":70,"length2":18},{"diffs":[[0,");},"],[1," "],[0,"\r\n\t\t"],[-1,"    error:"],[1,"\t\t\t\t "],[0," aja"]],"start1":2342,"start2":2342,"length1":22,"length2":18},{"diffs":[[0,"rHandler"],[1,", "],[0,"\r\n\t\t"],[-1,"}"],[1,"\t\t\t\t  \"text\""],[0,");\r\n\t};\r"]],"start1":2365,"start2":2365,"length1":21,"length2":34},{"diffs":[[0,"json"],[-1,"ObjectName\r\n\t * @param jsonObjectData"],[1,"Type nom complert de la classe de servidor a la que correspón l'objecte JSON enviat. Opcional,\r\n\t * si no s'indica, el servidor mapeja les dades JSON contra una col·lecció de HashMaps.\r\n\t * @param jsonData dades a enviar en format JSON."],[0,"\r\n\t "]],"start1":3385,"start2":3385,"length1":45,"length2":244},{"diffs":[[0,"zi correctament."],[1," Opcional, si no \r\n\t * s'indica, s'utilitza el gestor d'errors per defecte."],[0,"\r\n\t */\r\n\tPorticC"]],"start1":3830,"start2":3830,"length1":32,"length2":107},{"diffs":[[0,"var "],[-1,"loErrorCallback = ajaxErrorHandler;\r\n\t\t\t\r\n\t\t\tif('undefined' !== typeof errorCallBack){\r\n\t\t\t\tloErrorCallback = errorCallBack;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t    url: url,\r\n\t\t\t    dataType: \"json\",\r\n\t\t\t    async: false,\r\n\t\t\t    data: "],[1,"data ="],[0," {js"]],"start1":4027,"start2":4027,"length1":256,"length2":14},{"diffs":[[0,"ata}"],[-1,","],[1,";"],[0,"\r\n\t\t\t"],[-1,"    success: callback,\r\n\t\t\t    error: loE"],[1,"\r\n\t\t\tthis.sendAjaxPost(data, url, callback, e"],[0,"rrorCall"],[-1,"back\r\n\t\t\t});"],[1,"Back, \"json\");\r\n"],[0,"\r\n\t\t"]],"start1":4076,"start2":4076,"length1":75,"length2":83},{"diffs":[[0,"ram data"],[-1,""],[1,"ToSend"],[0," dades a"]],"start1":4263,"start2":4263,"length1":16,"length2":22},{"diffs":[[0,"orrectament."],[1," Opcional, si no \r\n\t * s'indica, s'utilitza el gestor d'errors per defecte.\r\n\t * @param returnDataType tipus de dades del retorn: text, xml, json, script, html... Opcional, per defecte\r\n\t * 'text' i l'aplicació gestiona el tipus de dades. "],[0,"\r\n\t */\r\n\tPor"]],"start1":4502,"start2":4502,"length1":24,"length2":263},{"diffs":[[0,"unction(data"],[1,"ToSend"],[0,", url, callb"]],"start1":4788,"start2":4788,"length1":24,"length2":30},{"diffs":[[0,"k, errorCallBack"],[1,", returnDataType"],[0,"){\r\n\t\ttry{\r\n\t\t\tv"]],"start1":4820,"start2":4820,"length1":32,"length2":48},{"diffs":[[0,"ndler;\r\n"],[1,"\t\t\tvar lsReturnType = \"text\";\r\n"],[0,"\t\t\t\r\n\t\t\t"]],"start1":4900,"start2":4900,"length1":16,"length2":47},{"diffs":[[0,"}\r\n\t\t\t\r\n"],[1,"\t\t\tif('undefined' !== typeof returnDataType){\r\n\t\t\t\tlsReturnType = returnDataType;\r\n\t\t\t}\r\n\t\t\t\r\n"],[0,"\t\t\t$.aja"]],"start1":5031,"start2":5031,"length1":16,"length2":110},{"diffs":[[0,": url,\r\n"],[1,"\t\t\t    dataType: lsReturnType,\r\n"],[0,"\t\t\t    a"]],"start1":5175,"start2":5175,"length1":16,"length2":48},{"diffs":[[0,"a:  data"],[1,"ToSend"],[0,",\r\n\t\t\t  "]],"start1":5247,"start2":5247,"length1":16,"length2":22},{"diffs":[[0,"\t};\r\n\t\r\n"],[1,"\tPorticCtx.getLiteral = function(key){\r\n\t\treturn $.format(Ember.I18n.translations[key]);\r\n\t};\r\n\t\r\n\tPorticCtx.showError = function(){\r\n\t\t$(\"#errorDialog\").show(\"clip\", {}, 1000);\r\n\t};\r\n\t\r\n"],[0,"\tajaxErr"]],"start1":5371,"start2":5371,"length1":16,"length2":203},{"diffs":[[0," al "],[-1,"proto"],[0,"tip"],[1,"us"],[0," Str"]],"start1":5704,"start2":5704,"length1":16,"length2":13}]],"length":6135,"saved":false}
{"contributors":[],"silentsave":false,"ts":1356020592015,"patch":[[{"diffs":[[0,"ador).\r\n"],[1,"    consoloe.log(\"vengo 1\");\r\n"],[0,"\tif('und"]],"start1":127,"start2":127,"length1":16,"length2":46},{"diffs":[[0,";\r\n\t}\r\n\t"],[1,"consoloe.log(\"vengo 2\");"],[0,"\r\n\tif ('"]],"start1":278,"start2":278,"length1":16,"length2":40},{"diffs":[[0,"tx;\r\n\t}\r\n\t\r\n"],[-1,""],[0,"\t"],[1,"consoloe.log(\"vengo 3\");"],[0,"\r\n\t/**\r\n\t * "]],"start1":403,"start2":403,"length1":25,"length2":49}]],"length":6213,"saved":false}
{"ts":1356020873913,"patch":[[{"diffs":[[0,"\r\n    consol"],[-1,"o"],[0,"e.log(\"vengo"]],"start1":133,"start2":133,"length1":25,"length2":24},{"diffs":[[0,"tx;\r\n\t}\r\n\tconsol"],[-1,"o"],[0,"e.log(\"vengo 2\")"]],"start1":275,"start2":275,"length1":33,"length2":32},{"diffs":[[0,"\n\tconsol"],[-1,"o"],[0,"e.log(\"v"]],"start1":412,"start2":412,"length1":17,"length2":16}]],"length":6210,"saved":false}
