{"ts":1356171194172,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var LogInApp = Ember.Application.create({\n    title: 'Mock Up Forwarding',\n    ready: function(){\n    \t// Carreguem els literals abans de pintar la p�gina.\n    \tPorticCtx.loadBrowserLanguage();\n   }\n});\n\nLogInApp.authView = Ember.View.extend({\n\t\n    // Aqu� posarem tot el codi a executar un cop resolta la vista.\n    didInsertElement:function(){\n    \t$(\"#errorDialog\").hide();\n    \t\n\t\t// Activem la validaci� del formulari.\n\t\t$(\"#frmAuth\").validate({ \n\t\t\trules: {\n\t\t\t\tusuari: \"required\",\n\t\t\t\tclaupub: {\n\t\t\t\t\trequired: true,\n\t\t\t\t\tminlength: 6\n\t\t\t\t}\t\n\t\t\t},\n\t\t    messages: {\n\t\t\t\tusuari: {\n\t\t\t\t\trequired: PorticCtx.getLiteral(\"login.required\"),\n\t\t\t\t},\n\t\t\t\tclaupub: {\n\t\t            required: PorticCtx.getLiteral(\"login.required\"),\n\t\t            minlength: PorticCtx.getLiteral(\"login.minLength\")\n\t\t        }\n\t\t    }\n\t\t});\n    }\n});\n\nLogInApp.authController = Ember.Object.create({\n\tdoAuthenticate: function(event){\n\t\tvar loJSON;\n\t\t\n\t\ttry{\n\t\t\tevent.preventDefault();\n\t\t\t\n\t\t\tloJSON = PorticCtx.formToJSON(\"frmAuth\");\n\t\t\t\n\t\t\tPorticCtx.sendJSONPost(\"\", loJSON, \"/PorticMockUp/json/rest/autenticate\", response);\n\t\t\t\n\t\t\tif(pCtx.getSession().ready()){\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\talert(\"No hi ha sessi�.\");\n\t\t\t}\n\t\t}catch(e){\n\t\t\talert(e.message);\n\t\t}\n\t},\n\tdoClean: function(event){\n\t\t$(\"#frmAuth\")[0].reset();\n\t}\n\t\n});\n\nLogInApp.errorController = Ember.Object.create({\n\tclose: function(event){\n\t\t$('#errorDialog').hide('clip', {}, 1000);\t\n\t}\n});\n\nfunction response(data){\n\tvar loSession = pCtx.getSession();\n\t\n\ttry{\n\t\tloSession.tokenSessio = data.token;\n\t\tloSession.usuariSessio = data.usuari;\n\t\tloSession.paisSessio = data.pais;\n\t\tloSession.nifSessio = data.nif;\n\t\tloSession.idioma = data.idioma;\n\t}catch(e){\n\t\talert(e.message);\n\t}\n}\n\n// Cualquier controller/view/...  que se defina deber ir antes de esta l�nea.\nLogInApp.initialize();"]],"start1":0,"start2":0,"length1":0,"length2":1817}]],"length":1817}
{"contributors":[],"silentsave":false,"ts":1356171456128,"patch":[[{"diffs":[[0,"\n\t\t\t\n\t\t\t"],[1,"//"],[0,"PorticCt"]],"start1":1012,"start2":1012,"length1":16,"length2":18}]],"length":1819,"saved":false}
